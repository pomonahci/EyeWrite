{"version":3,"sources":["homepage/sketchpage/colorpicker.js","homepage/sketchpage/topbar.js","homepage/sketchpage/path.js","homepage/sketchpage/importedstroke.js","homepage/sketchpage/sketch.js","homepage/sketchpage/assets/paper.png","homepage/sketchpage/assets/pencil1loop.mp3","homepage/sketchpage/assets/pencil2loop.mp3","homepage/sketchpage/assets/pencil3loop.mp3","homepage/sketchpage/sketchpage.js","homepage/homepage.js","App.js","reportWebVitals.js","index.js"],"names":["ColorPicker","props","handleClick","setState","displayColorPicker","state","handleClose","handleChange","color","changeColor","styles","reactCSS","main","float","padding","width","height","borderRadius","background","this","swatch","boxShadow","display","cursor","popover","position","zIndex","cover","top","right","bottom","left","style","FormControl","InputLabel","fontSize","onClick","onChange","React","Component","Topbar","changeMode","_","newMode","mode","handleStrokeSizeChange","event","changeStrokeSize","target","value","id","ToggleButtonGroup","className","exclusive","aria-label","ToggleButton","drawMode","Tooltip","title","eraseMode","IconButton","clear","Select","strokeSize","Array","keys","map","num","MenuItem","Path","initialCoords","draw","idCreator","idStroke","status","idMovedFrom","created","timeStart","timeEnd","undone","pencilTextureToggle","pencilTexture","pathCoords","svgPath","opacity","options","linecap","linejoin","rendered","erased","movedFrom","drawn","polyline","fill","stroke","filter","coords","cloneDeep","x","y","push","plot","i","length","dmove","remove","sketchGroup","add","index","xy","str","pathCoordsAtIndex","cp1x","cp1y","cp2x","cp2y","skip1","skip2","path","smoothCoords","serializedPath","ImportedStroke","type","msg","node","outerHTML","strokeCopy","console","log","attr","Sketch","svg","par","clearedSketches","group","currentPath","undoIndex","clearUndoIndex","prevMouseLocation","currMouseLocation","beganHighlighting","userID","currStrokeID","originalWidth","getWidth","originalHeight","getHeight","updateDimensions","animationfinished","newPaths","paths","newPath","setPaths","slice","sketchpad","document","getElementById","clientWidth","clientHeight","n","toString","d","Date","addZero","getHours","getMinutes","getSeconds","getMilliseconds","serialized","getPaths","serialize","serializedSketch","deserialize","hasprettyStroke","scaleSketch","undefined","addToGroupSmoothed","find","el","bbox","snoopHeight","votebar","getClientRects","scale","Math","min","transform","cx","cy","relative","scaleX","scaleY","sketchType","text","move","xScaleFactor","yScaleFactor","updateOrigin","scaleFactor","targetPath","addToGroup","mouseX","mouseY","selected","select","updatePaths","setColor","clientX","clientY","rect","getBoundingClientRect","Number","isNaN","closest_distances","getClosestDistanceDrawnSVG","getClosestDistanceImportedSVG","min_distance","apply","indexOf","distances","sqrt","boundingRect","startsWith","changedTouches","newTargetPath","svgHolder","getHTML","children","getTime","highlight","saveData","concat","hide","show","webcamX","webcamY","addPoint","moveBy","json","strokeList","peekHighlighted","interaction","clearInterval","intvl","intvlTime","convertToMillisec","startPath","setInterval","time","l","split","parseInt","SketchPage","sketchMode","currSoundCount","currStroke","currColor","currStrokeSize","snackbarOpen","drawing","sketchSounds","Howl","src","Pencil1","loop","Pencil2","Pencil3","setBindings","verifyJSON","bind","colorMode","moveMode","undo","redo","pickColor","isMobile","SVG","size","image","Paper","getElementsByTagName","Filter","turbulence","result","colorMatrix","composite","displacementMap","primarySketch","primSket","window","addEventListener","e","handleKeyUp","handleKeyDown","preventDefault","deltaY","querySelector","moveCursor","pageY","pageX","body","handleMouseUp","button","prevX","prevY","erase","moving","startMove","continueLineWithEvent","count","floor","random","play","paperTextureSwitch","pickedColor","changeStrokeVolume","hoverStroke","persist","prevMouseEvent","method","stop","finishPath","updateStrokeCode","keyCode","ctrlKey","metaKey","shiftKey","currHoveredStroke","colorDropped","border","hex","wheel","svgString","XMLSerializer","serializeToString","blob","Blob","FileSaver","saveAs","input","sketch","file","files","name","endsWith","Promise","resolve","reader","FileReader","onload","readAsText","then","img","each","attributes","addImportedStroke","parentNode","removeChild","currX","touches","currY","clearTimeout","timeout","setTimeout","Howler","mute","displacement","pow","vol","round","fade","volume","JSON","parse","currStrokeCode","addPathFromCode","err","onMouseDown","handleMouseDown","onMouseMove","handleMove","onMouseLeave","onMouseUp","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","Snackbar","open","autoHideDuration","onClose","severity","elevation","variant","HomePage","innerWidth","currSliderVal","codeToSVGButtonClicked","sliderVisible","verifyStrokeCode","updateSliderVal","newStrokeCode","newSliderVal","strokeCodeJSON","newCoords","sumX","sumY","j","stringify","App","onUpdate","scrollTo","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render"],"mappings":"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","file":"static/js/main.f9bb7c31.chunk.js","sourcesContent":["import React from 'react'\nimport reactCSS from 'reactcss'\nimport { SketchPicker } from 'react-color'\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\n\nexport class ColorPicker extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            displayColorPicker: false\n        }\n    }\n\n    handleClick = () => {\n        this.setState({ displayColorPicker: !this.state.displayColorPicker })\n    };\n\n    handleClose = () => {\n        this.setState({ displayColorPicker: false })\n    };\n\n    handleChange = (color) => {\n        this.props.changeColor(color)\n    };\n\n    render() {\n        const styles = reactCSS({\n            'default': {\n                main: {\n                    float: 'left',\n                    padding: '10px'\n                },\n                color: {\n                    width: '36px',\n                    height: '14px',\n                    borderRadius: '2px',\n                    background: `${this.props.color}`,\n                },\n                swatch: {\n                    padding: '5px',\n                    background: '#fff',\n                    borderRadius: '1px',\n                    boxShadow: '0 0 0 1px rgba(0,0,0,.1)',\n                    display: 'inline-block',\n                    cursor: 'pointer'\n                },\n                popover: {\n                    position: 'absolute',\n                    zIndex: '2',\n                },\n                cover: {\n                    position: 'fixed',\n                    top: '0px',\n                    right: '0px',\n                    bottom: '0px',\n                    left: '0px',\n                },\n            },\n        });\n\n        return (\n            <div style={styles.main}>\n                <FormControl>\n                    <InputLabel color=\"secondary\">  <div style={{fontSize: \"12px\"}}>Color</div>;</InputLabel>\n                    <div style={styles.swatch} onClick={this.handleClick}>\n                        <div style={styles.color} />\n                    </div>\n                </FormControl>\n                {this.state.displayColorPicker ? <div style={styles.popover}>\n                    <div style={styles.cover} onClick={this.handleClose} />\n                    <SketchPicker color={this.props.color} onChange={this.handleChange} />\n                </div> : null}\n            </div>\n\n        )\n    }\n}","import React, { Component } from 'react'\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport CreateIcon from '@material-ui/icons/Create';\nimport DeleteIcon from '@material-ui/icons/Delete';///\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\nimport { ColorPicker } from './colorpicker';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\n\nimport './topbar.css'\n\nexport class Topbar extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            mode: \"draw\"\n        }\n    }\n\n    changeMode = (_, newMode) => {\n        this.setState({ mode: newMode })\n    }\n\n    handleStrokeSizeChange = (event) => {\n        this.props.changeStrokeSize(event.target.value)\n    }\n\n    render() {\n        return (\n            <div id=\"topbar\">\n                <ColorPicker color={this.props.color} changeColor={this.props.changeColor}/>\n                <ToggleButtonGroup className=\"float-btn\" value={this.state.mode} exclusive onChange={this.changeMode} aria-label=\"sketch mode\">\n                    <ToggleButton onClick={() => this.props.drawMode()} value=\"draw\" aria-label=\"draw mode\">\n                        <Tooltip title=\"Draw Mode\">\n                            <CreateIcon />\n                        </Tooltip>\n                    </ToggleButton>\n                    <ToggleButton onClick={() => this.props.eraseMode()} value=\"erase\" aria-label=\"erase mode\">\n                        <Tooltip title=\"Erase Stroke\">\n                          <span id=\"eraser-background\"></span>\n                        </Tooltip>\n                    </ToggleButton>\n                </ToggleButtonGroup>\n                <Tooltip title=\"Clear Canvas\">\n                    <IconButton onClick={() => this.props.clear()} color=\"secondary\" aria-label=\"clear drawing\">\n                        <DeleteIcon />\n                    </IconButton>\n                </Tooltip>\n                <FormControl>\n                    <InputLabel color=\"secondary\">Size</InputLabel>\n                    <Select\n                        color=\"secondary\"\n                        value={this.props.strokeSize}\n                        onChange={this.handleStrokeSizeChange}>\n                            {[...Array(60).keys()].map(\n                                (num) => \n                                <MenuItem key={\"stroke-size-\"+num} value={num}>{num}</MenuItem>\n                            )}\n                    </Select>\n                </FormControl>\n            </div>\n        )\n    }\n}\n","import _ from \"lodash\"\nimport 'svg.filter.js'\n\n/** Single stroke of a sketch. SVG implementation. */\nexport default class Path {\n  /**\n   * @param {string} color - the color of the path\n   * @param {number} width - the width of the path\n   * @param {object} initialCoords - the sketch that this path is contained in\n   * @param {object} draw - the svg draw object used to render this path\n   * @param {string} idCreator - the creator ID of the user who created the path\n   * @param {number} idStroke - the stroke ID of the path (starts at 1 and increments as each stroke is added)\n   * @param {number} status - number indicating the current status of the stroke (1 = 'drawn', 2 = 'erased', 3 = 'moved')\n   * @param {number} idMovedFrom - the id of the stroke this stroke was moved from (not moved = 0)\n   * @param {number} created - number indicating how the stroke was created (1 = 'drawn', 2 = 'moved', 3 = 'copied')\n   * @param {string} timeStart - time when interaction with this stroke started (hh:mm:ss:ms)\n   * @param {string} timeEnd - time when interaction with this stroke ended (hh:mm:ss:ms)\n   * @param {boolean} pencilTextureToggle - boolean to indicate whether the stroke has a pencil texture\n   * @param {object} pencilTexture - the pencil texture SVG filter\n   * pencil texture modified from https://heredragonsabound.blogspot.com/2020/02/creating-pencil-effect-in-svg.html\n   */\n  constructor(color, width, initialCoords, draw, idCreator, idStroke, status, idMovedFrom,\n    created, timeStart, timeEnd, undone, pencilTextureToggle, pencilTexture) {\n    this.pathCoords = initialCoords  // Flattened array of points, stored as [x1, y1, x2, y2, ...]\n    this.svgPath = null\n\n    this.color = color\n    this.width = width\n    this.opacity = 1\n    this.draw = draw\n    this.options = { width: this.width, color: this.color, opacity: this.opacity, linecap: 'round', linejoin: 'round'}\n    this.rendered = true\n    this.erased = false\n    this.idCreator = idCreator\n    this.idStroke = idStroke\n    this.status = status \n    this.idMovedFrom = idMovedFrom \n    this.movedFrom = null\n    this.created = created \n    this.timeStart = timeStart\n    this.timeEnd = timeEnd\n    this.pencilTextureToggle = pencilTextureToggle\n    this.pencilTexture = pencilTexture\n    this.drawn = true\n    this.undone = undone\n\n    this.svgPath = this.draw.polyline(this.pathCoords).fill('none')\n        .stroke(this.options)\n    if (this.pencilTextureToggle) { // if stroke is on paper texture, adopt a pencil texture\n      this.svgPath.filter(this.pencilTexture)\n    }\n  }\n\n  /**\n   * Converts this path into a plain object.\n   * @return {object} object containing keys:\n   *\n   */\n  serialize() {\n    let coordscopy = _.cloneDeep(this.pathCoords)\n    return {\n      coords: coordscopy,\n      color: this.color,\n      width: this.width,\n      idCreator: this.idCreator,\n      idStroke: this.idStroke,\n      status: this.status,\n      idMovedFrom: this.idMovedFrom,\n      created: this.created,\n      timeStart: this.timeStart,\n      timeEnd: this.timeEnd,\n      undone: this.undone\n      // pencilTextureToggle: this.pencilTextureToggle\n    }\n  }\n\n  /**\n   *\n   * @param {object} serializedPath\n   * @param {object} draw\n   * @return {Path} the deserialized path\n   */\n  static deserialize(serializedPath, draw, pencilTexture) {\n    return new Path(serializedPath.color, serializedPath.width, serializedPath.coords, draw, \n      serializedPath.idCreator, serializedPath.idStroke, serializedPath.status, serializedPath.idMovedFrom,\n      serializedPath.created, serializedPath.timeStart, serializedPath.timeEnd, serializedPath.undone, serializedPath.pencilTextureToggle, pencilTexture)\n  }\n\n  /**\n   * Adds a point to the path and renders it.\n   *\n   * @param {number} x\n   * @param {number} y\n   */\n  addPoint(x, y) {\n    this.pathCoords.push(x)\n    this.pathCoords.push(y)\n    this.svgPath.plot(this.pathCoords)\n  }\n  /**\n   * Moves the path by a certain displacement.\n   *\n   * @param {number} x\n   * @param {number} y\n   */\n  moveBy(x, y) {\n    for (let i = 0; i < this.pathCoords.length; i++) {\n      this.pathCoords[i] = (i % 2 === 0) ? this.pathCoords[i] + x : this.pathCoords[i] + y\n    }\n    this.svgPath.dmove(x, y)\n  }\n\n  /**\n   * \"Highlights\" the path by changing its opacity.\n   */\n  highlight() {\n    this.svgPath.opacity(this.opacity)\n  }\n\n  /**\n   * Changes the color of the path\n   * @param {string} color \n   */\n  setColor(color) {\n    this.color = color\n    this.svgPath.stroke({color: color})\n  }\n\n  /**\n   * Stop rendering this path on the SVG.\n   */\n  remove(status) {\n    this.svgPath.remove()\n    this.rendered = false\n    this.status = status\n    if (status === 2) {\n      this.erased = true\n    }\n  }\n\n  /**\n   * Adds this path to the group so it can be rendered.\n   *\n   * @param {object} sketchGroup\n   */\n  addToGroup(sketchGroup) {\n    sketchGroup.add(this.svgPath)\n    this.rendered = true\n    this.status = 1\n  }\n\n  pathCoordsAtIndex(coords, index, xy) {\n    return coords[index * 2 + xy]\n  }\n\n  smoothCoords(coords) {\n    let str = ''\n    str += ('M ' + this.pathCoordsAtIndex(coords, 0, 0) + ' ' + this.pathCoordsAtIndex(coords, 0, 1) + ' ')\n    let skip1 = true\n    let skip2 = false\n    let cp1x, cp1y, cp2x, cp2y\n    for (let i = 0; i < coords.length / 2 - 1; i++) {\n      if (skip1) {\n        cp1x = this.pathCoordsAtIndex(coords, i, 0) // x\n        cp1y = this.pathCoordsAtIndex(coords, i, 1) // y\n        skip1 = false\n        skip2 = true\n      }\n      if (skip2) {\n        cp2x = this.pathCoordsAtIndex(coords, i, 0) // x\n        cp2y = this.pathCoordsAtIndex(coords, i, 1) // y\n\n        skip1 = false\n        skip2 = false\n      } else {\n        str += 'C ' + cp1x + ' ' + cp1y + ' ' + cp2x + ' ' + cp2y + ' ' +\n          this.pathCoordsAtIndex(coords, i, 0) + ' ' + this.pathCoordsAtIndex(coords, i, 1) + ' '\n        skip1 = true\n        skip2 = false\n      }\n    }\n    return str\n  }\n\n  addToGroupSmoothed(sketchGroup) {\n    this.svgPath.remove()\n    let path = this.draw.path(this.smoothCoords(this.pathCoords))\n        .fill('none')\n        .stroke(this.options)\n    if (this.pencilTextureToggle) {\n      path.filter(this.pencilTexture)\n    }\n    this.svgPath = path\n    sketchGroup.add(path)\n  }\n}\n","import _ from \"lodash\"\n\nexport default class ImportedStroke {\n    /**\n     * @param {object} draw - the svg draw object used to render this stroke\n     * @param {object} stroke - the stroke object\n     * @param {string} idCreator - the creator ID of the user who created the path\n     * @param {number} idStroke - the stroke ID of the path (starts at 1 and increments as each stroke is added)\n     * @param {number} status - number indicating the current status of the stroke (1 = 'drawn', 2 = 'erased', 3 = 'moved')\n     */\n    constructor(draw, stroke, idCreator, idStroke, status) {\n        this.type = stroke.type\n        this.drawn = false\n        this.draw = draw\n        this.stroke = stroke\n        this.rendered = true\n        this.idCreator = idCreator\n        this.idStroke = idStroke\n        this.status = status\n        this.opacity = 1\n        this.movedFrom = null\n    }\n\n    /**\n     * Converts this path into a plain object.\n     * @return {object} object containing keys:\n     *\n     */\n    serialize() {\n        return {\n            msg: 'placeholder text',\n            type: this.type,\n            status: this.status\n        }\n    }\n\n    getHTML() {\n        return this.stroke.node.outerHTML\n    }\n\n    copy() {\n        let strokeCopy = _.cloneDeep(this.stroke)\n        return new ImportedStroke(this.draw, strokeCopy, this.idCreator, this.idStroke, this.status)\n    }\n\n    /**\n     * Moves the path by a certain displacement.\n     *\n     * @param {number} x\n     * @param {number} y\n     */\n    moveBy(x, y) {\n        this.stroke.dmove(x, y)\n    }\n\n    /**\n     * \"Highlights\" the path by changing its opacity.\n     */\n    highlight() {\n        this.stroke.opacity(this.opacity)\n    }\n\n    /**\n     * Changes the color of the stroke\n     * @param {string} color \n     */\n    setColor(color) {\n        this.color = color\n        console.log(this.stroke.attr('stroke'))\n        console.log(this.stroke.attr('fill'))\n        if (this.stroke.attr('stroke') !== \"#000000\" && this.stroke.attr('stroke') !== \"none\") {\n            this.stroke.stroke({color: color})\n        }\n        if (this.stroke.attr('fill') !== \"#000000\" && this.stroke.attr('fill') !== \"none\" ) {\n            this.stroke.fill({color: color})\n        }\n    }\n\n    /**\n     * Stop rendering this path on the SVG.\n     */\n    remove(status) {\n        this.stroke.remove()\n        this.rendered = false\n        this.status = status\n        if (status === 2) {\n            this.erased = true\n        }\n    }\n\n    /**\n     * Adds this path to the group so it can be rendered.\n     *\n     * @param {object} sketchGroup\n     */\n    addToGroup(sketchGroup) {\n        sketchGroup.add(this.stroke)\n        this.rendered = true\n        this.status = 1\n    }\n}","/** A collection of path. Keeps track of a undo and redo buffer. */\nimport Path from './path'\nimport ImportedStroke from './importedstroke'\n\nexport default class Sketch {\n  /**\n   * @param {object} draw - the SVG draw object\n   * @param {object} svg - the svg element\n   * @param {object} pencilTexture - the pencil texture SVG filter\n   */\n  constructor(draw, svg, pencilTexture, par) {\n    // this.paths = []\n    this.clearedSketches = [[]] // Stores current sketch and all cleared sketches for undoing and redoing clears.\n    this.sketchGroup = draw.group()\n    this.draw = draw\n    this.currentPath = []\n    for (var i =0;i<par;i++){\n      this.currentPath.push([])\n    }\n    this.undoIndex = 0\n    this.clearUndoIndex = 0\n    this.svg = svg\n    this.prevMouseLocation = null\n    this.currMouseLocation = null\n    this.beganHighlighting = false\n    this.userID = null\n    this.currStrokeID = 1\n    this.pencilTexture = pencilTexture\n\n    this.originalWidth = this.getWidth()\n    this.originalHeight = this.getHeight()\n    this.updateDimensions()\n    this.animationfinished = true\n  }\n\n  getPaths() {\n    return this.clearedSketches[this.clearedSketches.length - this.clearUndoIndex - 1]\n  }\n\n  setPaths(newPaths) {\n    this.clearedSketches[this.clearedSketches.length - this.clearUndoIndex - 1] = newPaths\n  }\n\n  updatePaths(paths, newPath) {\n    paths.push(newPath)\n    this.setPaths(paths)\n    this.clearedSketches = this.clearedSketches.slice(0, this.clearedSketches.length - this.clearUndoIndex)\n    this.undoIndex = 0\n    this.clearUndoIndex = 0\n  }\n\n  getWidth() {\n    let sketchpad = document.getElementById('sketchpad')\n    if (sketchpad !== null) {\n      return sketchpad.clientWidth\n    }\n    return this.svg.clientWidth\n  }\n\n  getHeight() {\n    let sketchpad = document.getElementById('sketchpad')\n    if (sketchpad !== null) {\n      return sketchpad.clientHeight\n    }\n    return this.svg.clientHeight\n  }\n\n  addZero(x, n) {\n    while (x.toString().length < n) {\n      x = \"0\" + x;\n    }\n    return x;\n  }\n\n  getTime() {\n    let d = new Date()\n    let h = this.addZero(d.getHours(), 2)\n    let m = this.addZero(d.getMinutes(), 2)\n    let s = this.addZero(d.getSeconds(), 2)\n    let ms = this.addZero(d.getMilliseconds(), 3)\n    return h + \":\" + m + \":\" + s + \":\" + ms\n  }\n\n  /**\n   * Serialize a path into an array of objects\n   * @return {Array}\n   */\n  serialize() {\n    let serialized = []\n    let paths = this.getPaths()\n    for (let i = 0; i < paths.length - this.undoIndex; i++) {\n      serialized.push(paths[i].serialize())\n    }\n    return serialized\n  }\n\n  /**\n   * Loads in a serialized sketch.\n   * @param {Object} serializedSketch\n   */\n  loadSketch(serializedSketch) {\n    this.remove()\n    this.setPaths([])\n    for (let serializedPath of serializedSketch) {\n      if (serializedPath.status > 0) {\n        let path = Path.deserialize(serializedPath, this.draw, this.pencilTexture)\n        if (path !== null) {\n          path.hasprettyStroke = false\n          if (path.status !== 1) path.rendered = false\n          this.getPaths().push(path)\n        }\n      }\n    }\n  }\n\n  displayLoadedSketch(scaleSketch) {\n    scaleSketch = scaleSketch === undefined ? true : scaleSketch\n    this.sketchGroup.remove()\n    this.sketchGroup = this.draw.group()\n    if (!scaleSketch) {\n      this.updateDimensions()\n    }\n\n    for (let path of this.getPaths()) {\n      path.addToGroupSmoothed(this.sketchGroup)\n      if (path.status !== 1) path.remove(path.status)\n      if (path.created === \"move\") {\n        path.movedFrom = this.getPaths().find(el => el.idStroke === path.idMovedFrom)\n      }\n    }\n    let width = this.getWidth()\n    let height = this.getHeight()\n\n    if (!scaleSketch) {\n      return\n    }\n\n    // scale snooped sketch to fit.\n    let bbox = this.sketchGroup.bbox()\n\n    let snoopHeight = height\n    let votebar = document.getElementById('votebar')\n    if (votebar !== null) {\n      snoopHeight = snoopHeight - votebar.getClientRects()[0].height\n    }\n    let scale = Math.min(width / bbox.width, snoopHeight / bbox.height)\n\n    this.sketchGroup.transform({ // Center peeked sketch\n      x: width / 2 - bbox.cx,\n      y: snoopHeight / 2 - bbox.cy,\n      relative: true,\n    })\n    this.sketchGroup.transform({\n      scaleX: scale * 0.8, // Include some padding\n      scaleY: scale * 0.8,\n    })\n  }\n\n  /**\n   * Used on the adminpage to indicate which sketches are blank or peek-only\n   */\n  displayText(sketchType) {\n    var text\n    if (sketchType === \"peek\") {\n      text = this.draw.text(\"User has only peeked so far.\")\n      text.move(20, 70)\n    }\n    else {\n      text = this.draw.text(\"User has not sketched \\nnor peeked so far.\")\n      text.move(40, 70)\n    }\n    this.sketchGroup = text\n  }\n\n  /**\n   * Reset the origin to the center of image and scale sketch to fit screen, assuming it fit in original width and\n   * height.\n   */\n  updateDimensions() {\n    let xScaleFactor = (this.getWidth() / this.originalWidth)\n    let yScaleFactor = (this.getHeight() / this.originalHeight)\n\n    this.updateOrigin()\n    let scaleFactor = Math.min(xScaleFactor, yScaleFactor)\n\n    this.sketchGroup.transform({\n      scale: scaleFactor,\n      cx: 0,\n      cy: 0,\n    })\n  }\n\n  updateOrigin() {\n    this.sketchGroup.transform({\n      scale: 1,\n    })\n    this.sketchGroup.transform({\n      x: this.getWidth() / 2,\n      y: this.getHeight() / 2,\n    })\n  }\n\n  /**\n   * Undo an operation (erase, move, draw, clear)\n   */\n  undo(targetPath) {\n    if (this.undoIndex < this.getPaths().length) {\n      // let targetPath = this.getPaths()[this.getPaths().length - this.undoIndex - 1]\n      if (!targetPath) return false;\n      if (targetPath.status === 2 && !targetPath.rendered && targetPath.erased) { // undo erase\n        targetPath.addToGroup(this.sketchGroup)\n      }\n      else if (targetPath.rendered && targetPath.movedFrom !== null && !targetPath.movedFrom.rendered) { //undo move\n        targetPath.remove(3)\n        targetPath.movedFrom.addToGroup(this.sketchGroup)\n      }\n      else { //undo draw\n        targetPath.remove(2)\n      }\n      this.undoIndex += 1\n    } else if (this.clearUndoIndex < this.clearedSketches.length - 1) { // Undoing a clear\n      this.undoIndex = 0\n      this.clearUndoIndex += 1\n      for (let path of this.getPaths()) {\n        if (path.rendered) {\n          path.addToGroup(this.sketchGroup)\n        }\n      }\n    } else {\n      return false\n    }\n    return true\n  }\n\n  /**\n   * Redo an operation (erase, move, draw, clear)\n   */\n  redo(targetPath) {\n    if (this.undoIndex > 0) {\n      // let targetPath = this.getPaths()[this.getPaths().length - this.undoIndex]\n      if (!targetPath) return false;\n      if (targetPath.rendered && targetPath.erased) { // redo erase\n        targetPath.remove()\n      }\n      else if (!targetPath.rendered && targetPath.movedFrom !== null && targetPath.movedFrom.rendered) { //redo move\n        targetPath.addToGroup(this.sketchGroup)\n        targetPath.movedFrom.remove(3)\n      }\n      else { //redo draw\n        targetPath.addToGroup(this.sketchGroup)\n      }\n      this.undoIndex -= 1\n    } else if (this.clearUndoIndex > 0) { //redo clear\n      this.remove()\n      this.clearUndoIndex -= 1\n      this.undoIndex = this.getPaths().length\n    } else {\n      return false\n    }\n    return true\n  }\n\n  /**\n   * Clears all strokes\n   */\n  clear() {\n    if (this.getPaths().length === 0) {\n      return false\n    }\n    // this.setPaths(this.getPaths().slice(0, this.getPaths().length - this.undoIndex))\n    this.clearedSketches = this.clearedSketches.slice(0, this.clearedSketches.length - this.clearUndoIndex)\n    this.clearUndoIndex = 0\n    this.undoIndex = 0\n    this.remove()\n    this.clearedSketches.push([])\n    return true\n  }\n\n  /**\n   * Visually removes the sketch group\n   */\n  remove() {\n    this.sketchGroup.remove()\n    this.sketchGroup = this.draw.group()\n    this.updateDimensions()\n  }\n\n  /**\n   * Erases a stroke by making a copy of the stroke and hiding both\n   */\n  erase(mouseX, mouseY) {\n    let selected = this.select(mouseX, mouseY)\n    if (typeof selected !== 'undefined') {\n      let paths = selected[0]\n      let targetPath = selected[1]\n      targetPath.remove(2)\n      this.updatePaths(paths, targetPath)\n      //this.ecThis=targetPath\n      return true\n    }\n    return false\n  }\n\n\n  color(mouseX, mouseY, color) {\n    let selected = this.select(mouseX, mouseY)\n    if (typeof selected !== 'undefined') {\n      let targetPath = selected[1]\n      targetPath.setColor(color)\n      //this.ecThis=targetPath\n      return true\n    }\n    return false\n  }\n\n  pickColor(mouseX, mouseY) {\n    let selected = this.select(mouseX, mouseY)\n    if (typeof selected !== 'undefined') {\n      let targetPath = selected[1]\n      return targetPath.color\n    }\n    else {\n      return false\n    }\n  }\n\n  /**\n   * Selects the stroke closest to mouse position\n   */\n  select(clientX, clientY) {\n    if (this.getPaths().length > 0) {\n      let rect = this.svg.getBoundingClientRect()\n      let transform = this.sketchGroup.transform()\n      let mouseX = ((clientX - rect.left) - transform.x) / transform.scaleX\n      let mouseY = ((clientY - rect.top) - transform.y) / transform.scaleY\n      this.prevMouseLocation = [mouseX, mouseY]\n      this.currMouseLocation = [mouseX, mouseY]\n      if (!Number.isNaN(mouseX) && !Number.isNaN(mouseY)) {\n        let buffer = 40\n        let paths = this.getPaths().slice(0, this.getPaths().length - this.undoIndex)\n        let closest_distances = []\n        for (let i = 0; i < paths.length; i++) {\n          if (paths[i].status === 1) {\n            if (paths[i].drawn) {\n              closest_distances.push(this.getClosestDistanceDrawnSVG(paths[i].pathCoords, mouseX, mouseY))\n            }\n            else {\n              closest_distances.push(this.getClosestDistanceImportedSVG(\n                paths[i].stroke.node.getBoundingClientRect(), clientX, clientY)\n              )\n            }\n          }\n          else {\n            closest_distances.push(9999)\n          }\n        }\n        let min_distance = Math.min.apply(null, closest_distances)\n        if (min_distance < buffer) {\n          return [paths, paths[closest_distances.indexOf(min_distance)]]\n        }\n      }\n    }\n  }\n\n  /**\n   * Given a list of stroke coords, find the minimum distance between any point in the list and mouse position\n   */\n  getClosestDistanceDrawnSVG(coords, mouseX, mouseY) {\n    var distances = []\n    for (let i = 0; i < coords.length; i += 2) {\n      let x = coords[i] - mouseX\n      let y = coords[i + 1] - mouseY\n      distances.push(Math.sqrt(x * x + y * y))\n    }\n    return Math.min.apply(null, distances)\n  }\n\n  getClosestDistanceImportedSVG(boundingRect, mouseX, mouseY) {\n    var distances = []\n    for (let width = 0; width < boundingRect.width; width++) {\n      for (let height = 0; height < boundingRect.height; height++) {\n        let x = boundingRect.x + width - mouseX\n        let y = boundingRect.y + height - mouseY\n        distances.push(Math.sqrt(x * x + y * y))\n      }\n    }\n    return Math.min.apply(null, distances)\n  }\n\n  /**\n   * Starts moving the stroke closest to mouse position by \n   * - Making a copy of the stroke\n   * - Hiding the original stroke\n   * - Setting the copied stroke as the one targetted for moving\n   */\n  startMove(event) {\n    if (event.type.startsWith('touch')) {\n      event = event.changedTouches[0]\n    }\n    let selected = this.select(event.clientX, event.clientY)\n    if (typeof selected !== 'undefined') {\n      // makes (unrendered) copy of target path for future undo and adds to stack \n      let paths = selected[0]\n      let targetPath = selected[1]\n      let newTargetPath\n      if (targetPath.drawn) {\n        newTargetPath = Path.deserialize(targetPath.serialize(), this.draw, this.pencilTexture)\n        newTargetPath.addToGroupSmoothed(this.sketchGroup) // necessary, otherwise copied path off position\n      }\n      else {\n        let svgHolder = this.draw.svg(targetPath.getHTML())\n        newTargetPath = new ImportedStroke(this.draw, svgHolder.children()[3], this.userID, this.currStrokeID, 1)\n        newTargetPath.addToGroup(this.sketchGroup)\n      }\n      newTargetPath.timeStart = this.getTime()\n      newTargetPath.idStroke = this.currStrokeID\n      newTargetPath.pencilTextureToggle = targetPath.pencilTextureToggle\n      newTargetPath.created = 2\n      newTargetPath.idMovedFrom = targetPath.idStroke\n      newTargetPath.movedFrom = targetPath\n      targetPath.remove(3)\n      this.currStrokeID += 1\n      newTargetPath.opacity = 0.1\n      newTargetPath.highlight()\n      this.updatePaths(paths, newTargetPath)\n      this.currentPath = newTargetPath\n      return true\n    }\n    return false\n  }\n\n  endMove() {\n    this.currentPath.opacity = 1\n    this.currentPath.highlight()\n    this.currentPath.timeEnd = this.getTime()\n    let saveData = this.prevMouseLocation.concat(this.currMouseLocation)\n    this.currMouseLocation = null\n    return saveData\n  }\n\n  hide() {\n    this.sketchGroup.hide()\n  }\n\n  show() {\n    this.sketchGroup.show()\n  }\n\n  /**\n   * Depending on mode, adds a point onto the current or moves path\n   * @param {object} event\n   * @param {string} mode\n   */\n  continueLineWithEvent(event, mode, webcamX, webcamY) {\n    let rect = this.svg.getBoundingClientRect()\n    let x\n    let y\n    let transform = this.sketchGroup.transform()\n    // Transform coordinates on svg div to center origin coordinates of sketchGroup\n    if (event === null) {\n      x = ((webcamX - rect.left) - transform.x) / transform.scaleX\n      y = ((webcamY - rect.top) - transform.y) / transform.scaleY\n    }\n    else {\n      if (event.type.startsWith('touch')) {\n        event = event.changedTouches[0]\n      }\n      x = ((event.clientX - rect.left) - transform.x) / transform.scaleX\n      y = ((event.clientY - rect.top) - transform.y) / transform.scaleY\n    }\n\n    if (mode === 'draw') {\n      this.currentPath.addPoint(x, y)\n      // this.sketchEdit('point')\n    }\n    else if (mode === 'move') {\n      if (this.currMouseLocation !== null) {\n        this.currentPath.moveBy(x - this.currMouseLocation[0], y - this.currMouseLocation[1])\n        this.currMouseLocation = [x, y]\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {string} color\n   * @param {number} width\n   * @param {boolean} pencilTextureToggle\n   */\n  startPath(color, width, pencilTextureToggle) {\n    this.currentPath = new Path(color, width, [], this.draw, this.userID, this.currStrokeID, 1, 0, 1, \"\", \"\", false, pencilTextureToggle, this.pencilTexture)\n    this.currStrokeID += 1\n    this.currentPath.addToGroup(this.sketchGroup)\n    this.currentPath.timeStart = this.getTime()\n  }\n\n  /**\n   * Adds the current path to the list of other paths.\n   */\n  finishPath() {\n    this.currentPath.timeEnd = this.getTime()\n    let paths = this.getPaths().slice(0, this.getPaths().length - this.undoIndex)\n    this.updatePaths(paths, this.currentPath)\n    this.currentPath.addToGroupSmoothed(this.sketchGroup)\n    // this.sketchEdit('draw')\n    //this.currentPath = null\n  }\n\n  /**\n   * Add new path based on JSON specifications\n   * @param {*} json \n   */\n  addPathFromCode(json) {\n    let newTargetPath = Path.deserialize(json, this.draw, this.pencilTexture)\n    let paths = this.getPaths().slice(0, this.getPaths().length - this.undoIndex)\n    let targetPath = this.currentPath\n    newTargetPath.idStroke = this.currStrokeID\n    newTargetPath.pencilTextureToggle = targetPath.pencilTextureToggle\n    newTargetPath.created = 2\n    this.currStrokeID += 1\n    newTargetPath.idMovedFrom = targetPath.idStroke\n    newTargetPath.movedFrom = targetPath\n    newTargetPath.hasprettyStroke = false\n    targetPath.remove(3)\n    newTargetPath.addToGroupSmoothed(this.sketchGroup) // necessary, otherwise copied path off position\n    newTargetPath.timeStart = this.getTime()\n    this.updatePaths(paths, newTargetPath)\n    this.currentPath = newTargetPath\n  }\n\n  /**\n   * Highlight the stroke closest to mouse position\n   */\n  highlightPeekedStroke(event) {\n    let selected = this.select(event.clientX, event.clientY)\n    if (typeof selected !== 'undefined') {\n      selected[1].highlight()\n      this.beganHighlighting = true\n    }\n  }\n\n  /**\n   * Returns all highlighted strokes\n   */\n  getHighlightedPeekedStrokes() {\n    let strokeList = []\n    for (let path of this.getPaths()) {\n      if (path.peekHighlighted) {\n        strokeList.push(path)\n      }\n    }\n    return strokeList\n  }\n\n  /**\n   * Create a pseudo animation for drawing by gradually creating a path with same coordinates as most recent path, then deleting that path\n   * @param {string} interaction\n   */\n  animateNewPeekedStroke(interaction) {\n    if (interaction !== 'sketch') {\n      return\n    }\n    let paths = this.getPaths()\n    let path = paths[paths.length - 1]\n    if (path.created === 1 && path.status === 1) {\n      if (!this.animationfinished) {\n        this.currentPath.remove(2)\n        path.addToGroup(this.sketchGroup)\n        this.animationfinished = true\n        clearInterval(this.intvl)\n      }\n      this.animationfinished = false\n      path.remove(2)\n      let totalTime = this.convertToMillisec(path.timeEnd) - this.convertToMillisec(path.timeStart)\n      let intvlTime = totalTime / (path.pathCoords.length / 2)\n      let i = 0\n      this.startPath(path.color, path.width, path.pencilTextureToggle, this.pencilTexture)\n      this.intvl = setInterval(() => {\n        if (i >= path.pathCoords.length) {\n          this.currentPath.addToGroupSmoothed(this.sketchGroup)\n          this.currentPath.remove(2)\n          path.addToGroup(this.sketchGroup)\n          this.animationfinished = true\n          clearInterval(this.intvl)\n        }\n        else {\n          this.currentPath.addPoint(path.pathCoords[i], path.pathCoords[i + 1])\n          i += 2\n        }\n      }, intvlTime)\n    }\n  }\n\n  /**\n   * Converts time with format (hh:mm:ss:ms) into milliseconds\n   * @param {string} time \n   */\n  convertToMillisec(time) {\n    let l = time.split(\":\")\n    return (parseInt(l[0] * 3600000) + parseInt(l[1] * 60000) + parseInt(l[2] * 1000) + parseInt(l[3]))\n  }\n\n  addImportedStroke(stroke) {\n    this.currentPath = new ImportedStroke(this.draw, stroke, this.userID, this.currStrokeID, 1)\n    this.currStrokeID += 1\n    this.currentPath.timeEnd = this.getTime()\n    let paths = this.getPaths().slice(0, this.getPaths().length - this.undoIndex)\n    this.updatePaths(paths, this.currentPath)\n    this.currentPath.addToGroup(this.sketchGroup)\n  }\n}","export default __webpack_public_path__ + \"static/media/paper.64f19b60.png\";","export default __webpack_public_path__ + \"static/media/pencil1loop.e5fcd29b.mp3\";","export default __webpack_public_path__ + \"static/media/pencil2loop.1d70b1af.mp3\";","export default __webpack_public_path__ + \"static/media/pencil3loop.f85ab838.mp3\";","import React, { Component } from 'react'\nimport { isMobile } from 'react-device-detect'\nimport { Howl, Howler } from 'howler'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport MuiAlert from '@material-ui/lab/Alert'\nimport FileSaver from 'file-saver'\nimport SVG from 'svg.js'\nimport 'svg.filter.js'\n\nimport { Topbar } from './topbar'\nimport Sketch from './sketch'\nimport Paper from './assets/paper.png'\nimport Pencil1 from './assets/pencil1loop.mp3'\nimport Pencil2 from './assets/pencil2loop.mp3'\nimport Pencil3 from './assets/pencil3loop.mp3'\nimport './sketchpage.css'\n\nexport class SketchPage extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            sketchMode: 'draw',\n            currSoundCount: 0,\n            currStroke: this.props.currStroke,\n            currColor: '#D4AAAA',\n            currStrokeSize: 4,\n            snackbarOpen: false\n        }\n        this.drawing = false;\n        this.sketchSounds = [new Howl({ src: [Pencil1], loop: true }),\n        new Howl({ src: [Pencil2], loop: true }),\n        new Howl({ src: [Pencil3], loop: true })]\n        this.setBindings()\n    }\n\n    setBindings() {\n        this.verifyJSON = this.verifyJSON.bind(this)\n        this.drawMode = this.drawMode.bind(this)\n        this.colorMode = this.colorMode.bind(this)\n        this.eraseMode = this.eraseMode.bind(this)\n        this.moveMode = this.moveMode.bind(this)\n        this.clear = this.clear.bind(this)\n        this.undo = this.undo.bind(this)\n        this.redo = this.redo.bind(this)\n        // this.download = this.download.bind(this)\n        // this.import = this.import.bind(this)\n        this.changeColor = this.changeColor.bind(this)\n        this.pickColor = this.pickColor.bind(this)\n        this.changeStrokeSize = this.changeStrokeSize.bind(this)\n    }\n\n    componentDidMount() {\n        let width = document.getElementById('sketchpage').clientWidth\n        let height = document.getElementById('sketchpage').clientHeight\n        if (isMobile) {\n            this.draw = SVG('svg').size(width, height)\n            this.background = this.draw.image(Paper, width, height)\n        } else {\n            this.draw = SVG('svg').size('100%', '100%')\n            this.background = this.draw.image(Paper, width, height)\n        }\n        this.background.scale(5).hide()\n        let svg = document.getElementById('svg').getElementsByTagName('svg')[0]\n\n        // Uses SVG filters to create a pencil texture \n        this.pencilTexture = new SVG.Filter()\n        this.pencilTexture.turbulence(1.5, 1, 0, \"noStitch\", \"fractalNoise\").result(\"f1\")\n        this.pencilTexture.colorMatrix(\"matrix\", \"0 0 0 0 0, 0 0 0 0 0, 0 0 0 0 0, 0 0 0 -1.5 2.8\").result(\"f2\")\n        this.pencilTexture.composite(\"SourceGraphic\", \"f2\", \"in\").result(\"f3\")\n        this.pencilTexture.turbulence(1.8, 3, 0, \"noStitch\", \"fractalNoise\").result(\"noise\")\n        this.pencilTexture.displacementMap(\"f3\", \"\", 2.5, \"R\", \"G\").result(\"f4\")\n        //\n\n        this.primarySketch = new Sketch(this.draw, svg, this.pencilTexture)\n        // this.ServerSketch = new Sketch(this.draw, svg, this.pencilTexture)\n        // this.ServerSketch = this.ServerSketch.serialize()\n        this.primSket = this.primarySketch\n        // this.pathEX = Path\n\n        window.addEventListener('resize', () => {\n            this.primarySketch.updateDimensions()\n        })\n\n        window.addEventListener('keyup', (e) => this.handleKeyUp(e))\n        window.addEventListener('keydown', (e) => this.handleKeyDown(e))\n        svg.addEventListener('touchmove', (e) => {\n            e.preventDefault()\n        })\n        svg.addEventListener('wheel', (e) => {\n            this.changeStrokeSize(e.deltaY * -0.02, true)\n        })\n        this.cursor = document.querySelector(\".cursor\")\n        svg.addEventListener('mousemove', (e) => this.moveCursor(e, 'in'))\n        svg.addEventListener('mouseleave', (e) => this.moveCursor(e, 'out'))\n        svg.addEventListener('mouseenter', (e) => this.moveCursor(e, 'into'))\n    }\n\n    moveCursor(e, status) {\n        if (status === \"in\") {\n            if (this.state.sketchMode === \"draw\") {\n                this.cursor.style.top = e.pageY + \"px\"\n                this.cursor.style.left = e.pageX + \"px\"\n                document.body.style.cursor = 'none'\n            }\n            else {\n                this.cursor.style.display = \"none\"\n            }\n        }\n        else if (status === \"out\") {\n            this.cursor.style.display = \"none\"\n            document.body.style.cursor = 'auto'\n            this.handleMouseUp(e, \"mouse\")\n        }\n        else {\n            if (this.state.sketchMode === \"draw\") {\n                this.cursor.style.display = \"block\"\n                this.cursor.style.top = e.pageY + \"px\"\n                this.cursor.style.left = e.pageX + \"px\"\n                document.body.style.cursor = 'none'\n            }\n            else if (this.state.sketchMode === \"color\") {\n                document.body.style.cursor = 'cell'\n            }\n            else if (this.state.sketchMode === \"pickColor\") {\n                document.body.style.cursor = 'crosshair'\n            }\n            else if (this.state.sketchMode === \"erase\") {\n                document.body.style.cursor = 'pointer'\n            }\n            else {\n                document.body.style.cursor = 'grab'\n            }\n        }\n    }\n\n    handleMouseDown(e) {\n        if(e.button==2){return}\n        // this.drawing = falsex\n        // this.currentlyEditing = true\n        this.prevX = e.clientX\n        this.prevY = e.clientY\n        if (this.state.sketchMode === 'erase') {\n            this.primarySketch.erase(e.clientX, e.clientY)\n            // this.sketchEdit('erase',e.clientX,e.clientY)\n        }\n        else if (this.state.sketchMode === 'move') {\n            if (!this.moving && this.primarySketch.startMove(e)) {\n                this.moving = true\n                document.body.style.cursor = 'grabbing'\n                this.primarySketch.continueLineWithEvent(e, 'move')\n\n            }\n        }\n        else if (this.state.sketchMode === 'draw') {\n            let count = Math.floor(Math.random() * Math.floor(3))\n            this.sketchSounds[count].play()\n            this.setState({ currSoundCount: count })\n            this.drawing = true\n            this.primarySketch.startPath(this.state.currColor, this.state.currStrokeSize, this.state.paperTextureSwitch)\n            this.primarySketch.continueLineWithEvent(e, 'draw')\n        }\n        else if (this.state.sketchMode === 'color') {\n            this.primarySketch.color(e.clientX, e.clientY, this.state.currColor)\n            // this.sketchEdit('color')\n        }\n        else if (this.state.sketchMode === 'pickColor') {\n            let pickedColor = this.primarySketch.pickColor(e.clientX, e.clientY)\n            if (pickedColor) {\n                this.changeColor(pickedColor, true)\n            }\n        }\n    }\n\n    handleMove(e) {\n        if (this.drawing) {\n            this.changeStrokeVolume(e)\n            this.primarySketch.continueLineWithEvent(e, 'draw')\n        }\n        else if (this.moving) {\n            this.primarySketch.continueLineWithEvent(e, 'move')\n        }\n        else if (this.state.sketchMode !== 'draw') {\n            this.hoverStroke(e)\n        }\n        e.persist()\n        this.prevMouseEvent = e\n    }\n\n    handleMouseUp(e, method) {\n        // console.log(e)\n        if(e.button==2){return}\n        // this.drawing = false\n        // this.currentlyEditing = false\n        if (this.state.sketchMode === 'move' && this.moving && !this.drawing) {\n            this.moving = false\n            document.body.style.cursor = 'grab'\n            // this.sketchEdit('move')\n        }\n        else if (this.state.sketchMode === 'draw') { // drawing mode\n            if (this.drawing) {\n                console.log(\"FINISHING PATH\")\n\n                this.sketchSounds[this.state.currSoundCount].stop()\n                this.drawing = false\n                this.primarySketch.finishPath()\n            }\n        }\n        if (this.primarySketch.currentPath !== null) {\n            // this.props.updateStrokeCode(JSON.stringify(this.primarySketch.currentPath.serialize()), 'there')\n        }\n        else {\n            this.props.updateStrokeCode(\"Start drawing a SVG to begin! -->\")\n        }\n    }\n\n    handleKeyUp(e) { }\n\n    handleKeyDown(e) {\n        if (e.keyCode === 90 && (e.ctrlKey || e.metaKey) && e.shiftKey) {\n            this.primarySketch.redo()\n            // this.sketchEdit('redo')\n        } else if (e.keyCode === 90 && (e.ctrlKey || e.metaKey)) {\n            this.primarySketch.undo()\n            // this.sketchEdit('undo')\n        }\n    }\n\n    hoverStroke(e) {\n        let selected = this.primarySketch.select(e.clientX, e.clientY)\n        if (typeof selected !== 'undefined') {\n            if (typeof this.currHoveredStroke !== 'undefined' && this.currHoveredStroke.idStroke !== selected[1].idStroke) {\n                this.currHoveredStroke.opacity = 1\n                this.currHoveredStroke.highlight()\n            }\n            this.currHoveredStroke = selected[1]\n            this.currHoveredStroke.opacity = 0.1\n            this.currHoveredStroke.highlight()\n        }\n        else {\n            if (typeof this.currHoveredStroke !== 'undefined') {\n                this.currHoveredStroke.opacity = 1\n                this.currHoveredStroke.highlight()\n            }\n        }\n    }\n\n    /**\n     * Switches between the draw, erase, and move modes\n     */\n    mode() {\n        if (this.state.sketchMode === 'draw') this.eraseMode()\n        else if (this.state.sketchMode === 'erase') this.moveMode()\n        else if (this.state.sketchMode === 'move') this.drawMode()\n    }\n\n    drawMode() {\n        this.setState({ sketchMode: 'draw' })\n        document.body.style.cursor = 'auto'\n        if (typeof (this.currHoveredStroke) !== \"undefined\") {\n            this.currHoveredStroke.opacity = 1\n            this.currHoveredStroke.highlight()\n        }\n    }\n\n    colorMode() {\n        this.setState({ sketchMode: 'color' })\n        document.body.style.cursor = 'cell'\n    }\n\n    pickColor() {\n        this.setState({ sketchMode: 'pickColor' })\n        document.body.style.cursor = 'crosshair'\n    }\n\n    eraseMode() {\n        this.setState({ sketchMode: 'erase' })\n        document.body.style.cursor = 'no-drop'\n    }\n\n    moveMode() {\n        this.setState({ sketchMode: 'move' })\n        document.body.style.cursor = 'grab'\n    }\n\n    clear() {\n        if (this.primarySketch.clear()) {\n            this.primarySketch.updateDimensions()\n            // this.sketchEdit('clear')\n        }\n    }\n\n    undo() {\n        this.primarySketch.undo();\n        // this.sketchEdit('undo')\n    }\n\n    redo() {\n        this.primarySketch.redo();\n        // this.sketchEdit('redo')\n    }\n    changeColor(color, colorDropped = false) {\n        if (colorDropped) {\n            this.setState({ currColor: color }, () => {\n                document.getElementById(\"draw-cursor\").style.border = `1px solid ${this.state.currColor}`\n            })\n        }\n        else {\n            this.setState({ currColor: color.hex }, () => {\n                document.getElementById(\"draw-cursor\").style.border = `1px solid ${this.state.currColor}`\n            })\n        }\n    }\n\n    changeStrokeSize(size, wheel=false) {\n        if (wheel) {\n            this.setState({ currStrokeSize: this.state.currStrokeSize + size}, () => {\n                this.cursor.style.width = this.state.currStrokeSize + \"px\"\n                this.cursor.style.height = this.state.currStrokeSize + \"px\"\n            })\n        }\n        else {\n            this.setState({ currStrokeSize: size}, () => {\n                this.cursor.style.width = this.state.currStrokeSize + \"px\"\n                this.cursor.style.height = this.state.currStrokeSize + \"px\"\n            })\n        }\n    }\n\n    /**\n    * Download current sketch as svg file\n    */\n    download() {\n        this.setState({ paperTextureSwitch: false })\n        this.background.hide()\n        //convert svg to blob\n        let svg = document.getElementById('svg').getElementsByTagName('svg')[0]\n        let serializer = new XMLSerializer()\n        let svgString = serializer.serializeToString(svg)\n        let blob = new Blob([svgString], { type: \"image/svg+xml\" })\n        //download\n        FileSaver.saveAs(blob, \"img.svg\")\n    }\n\n    /**\n     * Import local SVG file\n     * @param {*} input \n     */\n    import(input) {\n        const sketch = this.primarySketch\n        let file = input.files[0]\n        if (file.name.endsWith('svg')) {\n            const promise = new Promise((resolve) => {\n                const reader = new FileReader()\n                reader.onload = function () {\n                    resolve(reader.result)\n                }\n                reader.readAsText(file)\n            })\n            promise.then(img => {\n                let newSvg = sketch.draw.svg(img)\n                let svgHolder = newSvg.children()[3]\n                svgHolder.each(function (i, children) {\n                    if (this.type === 'rect' && this.node.attributes.fill.value === \"none\") {\n                        this.remove()\n                    }\n                    else {\n                        sketch.addImportedStroke(this)\n                    }\n                })\n                svgHolder.node.parentNode.removeChild(svgHolder.node)\n            })\n        }\n        else {\n            this.setState({ snackbarOpen: true })\n        }\n    }\n\n    /**\n    * Dynamically changes the stroke volume based on stroke speed\n    */\n    changeStrokeVolume(e) {\n        let currX = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX\n        let currY = e.type === 'touchmove' ? e.touches[0].clientY : e.clientY\n        clearTimeout(this.timeout)\n        this.timeout = setTimeout(function () { Howler.mute(true) }, 50)\n        let displacement = Math.sqrt(Math.pow(this.prevX - currX, 2) + Math.pow(this.prevY - currY, 2))\n        this.prevX = currX\n        this.prevY = currY\n        let vol = Math.round(Math.min(1, displacement / 10) * 10) / 10\n        if (vol < 0.1) { vol = 0 }\n        if (vol < 0.3) { vol = 0.2 }\n        else if (vol < 0.7) { vol = 0.5 }\n        else { vol = 0.8 }\n        Howler.mute(false)\n        this.sketchSounds[this.state.currSoundCount].fade(\n            this.sketchSounds[this.state.currSoundCount].volume(), vol, 100\n        )\n    }\n\n    verifyJSON() {\n        try {\n            let json = JSON.parse(this.props.currStrokeCode)\n            this.primarySketch.addPathFromCode(json)\n        }\n        catch (err) {\n            this.setState({ snackbarOpen: true })\n        }\n    }\n\n    render() {\n        return (\n            <div id=\"sketchpage\" style={{height:'100%'}}>\n                <Topbar verifyJSON={this.verifyJSON}\n                    color={this.state.currColor}\n                    // import={this.import}\n                    drawMode={this.drawMode}\n                    colorMode={this.colorMode}\n                    pickColor={this.pickColor}\n                    eraseMode={this.eraseMode}\n                    moveMode={this.moveMode}\n                    undo={this.undo}\n                    redo={this.redo}\n                    clear={this.clear}\n                    // download={this.download}\n                    changeColor={this.changeColor}\n                    changeStrokeSize={this.changeStrokeSize}\n                    strokeSize={this.state.currStrokeSize} />\n                <div id=\"svg\"\n                    onMouseDown={(e) => this.handleMouseDown(e)}\n                    onMouseMove={(e) => this.handleMove(e)}\n                    onMouseLeave={(e) => this.handleMouseUp(e, 'mouse')}\n                    onMouseUp={(e) => this.handleMouseUp(e, 'mouse')}\n                    onTouchCancel={(e) => this.handleMouseUp(e, 'mobile')}\n                    onTouchEnd={(e) => this.handleMouseUp(e, 'mobile')}\n                    onTouchMove={(e) => this.handleMove(e)}\n                    onTouchStart={(e) => this.handleMouseDown(e)}>\n                </div>\n                <Snackbar open={this.state.snackbarOpen} autoHideDuration={2000} onClose={() => this.setState({ snackbarOpen: false })}>\n                    <MuiAlert severity=\"error\" elevation={6} variant=\"filled\">\n                        SVG code invalid!\n                    </MuiAlert>\n                </Snackbar>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport { SketchPage } from './sketchpage/sketchpage'\nimport './homepage.css'\n\nexport class HomePage extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            width: window.innerWidth,\n            currStrokeCode: \"Start drawing a SVG to begin! -->\",\n            currSliderVal: 1,\n            codeToSVGButtonClicked: false,\n            sliderVisible: false\n        }\n        this.updateStrokeCode = this.updateStrokeCode.bind(this)\n        this.verifyStrokeCode = this.verifyStrokeCode.bind(this)\n        this.updateSliderVal = this.updateSliderVal.bind(this)\n    }\n\n    componentDidMount() {\n        window.addEventListener('resize', () => {\n            this.setState({width: window.innerWidth})\n        })\n    }\n\n    updateStrokeCode(newStrokeCode) {\n        this.setState({currStrokeCode: newStrokeCode})\n        this.setState({sliderVisible: true})\n    }\n\n    updateSliderVal(newSliderVal) {\n        this.setState({currSliderVal: newSliderVal})\n        let strokeCodeJSON = JSON.parse(this.state.currStrokeCode)\n        let newCoords = []\n        for (let i = 0; i < strokeCodeJSON.coords.length - (newSliderVal * 2); i+=2) {\n            let sumX = 0\n            let sumY = 0\n            for (let j = 0; j < newSliderVal * 2; j++) {\n                if ( j % 2 === 0) {\n                    sumX += strokeCodeJSON.coords[i+j]\n                }\n                else {\n                    sumY += strokeCodeJSON.coords[i+j]\n                }\n            }\n            sumX /= newSliderVal\n            sumY /= newSliderVal\n            sumX = Math.round(sumX)\n            sumY = Math.round(sumY)\n            newCoords.push.apply(newCoords, [sumX, sumY])\n        }\n        strokeCodeJSON.coords = newCoords\n        this.setState({currStrokeCode: JSON.stringify(strokeCodeJSON)})\n    }\n\n    verifyStrokeCode() {\n        this.setState({codeToSVGButtonClicked: true})\n    }\n\n    render() {\n        return (\n            <div id=\"root\">\n\n                <SketchPage currStrokeCode={this.state.currStrokeCode}\n                            updateStrokeCode={this.updateStrokeCode} \n                            codeToSVGButtonClicked={this.state.codeToSVGButtonClicked}/>\n                <div id=\"draw-cursor\" className=\"cursor\"></div>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react';\nimport './App.css';\nimport {BrowserRouter, Route, Switch} from \"react-router-dom\";\nimport { HomePage } from \"./homepage/homepage\";\ndocument.addEventListener('contextmenu', event => event.preventDefault());\n\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <BrowserRouter onUpdate={() => window.scrollTo(0, 0)}>\n          <Switch>\n            <Route path='/' component={HomePage}/>\n          </Switch>\n        </BrowserRouter>\n      </div>\n    )\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}